diff --git a/Linux-PAM-1.1.8/modules/pam_motd/README b/Linux-PAM-1.1.8/modules/pam_motd/README
index 12a8fcc..118d73d 100644
--- Linux-PAM-1.1.8/modules/pam_motd/README
+++ Linux-PAM-1.1.8/modules/pam_motd/README
@@ -14,6 +14,13 @@ motd=/path/filename
 
     The /path/filename file is displayed as message of the day.
 
+    Set it to /run/motd.dynamic to use the dynamic motd generated by
+    scripts in /etc/update-motd.d directory.
+
+noupdate
+
+    Don't run the scripts in /etc/update-motd.d to refresh the motd file.
+
 EXAMPLES
 
 The suggested usage for /etc/pam.d/login is:
diff --git a/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8 b/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8
index 66ba3f6..d23fdac 100644
--- Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8
+++ Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8
@@ -44,7 +44,16 @@ file is shown\&. The message size is limited to 64KB\&.
 The
 /path/filename
 file is displayed as message of the day\&.
+Set it to /run/motd.dynamic to use the dynamic motd generated by
+scripts in /etc/update-motd.d directory.\&.
 .RE
+\fBnoupdate\fR
+.RS 4
+Don\*(Aqt run the scripts in
+/etc/update\-motd\&.d
+to refresh the motd file\&.
+.RE
+.PP
 .SH "MODULE TYPES PROVIDED"
 .PP
 Only the
diff --git a/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8.xml b/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8.xml
index ff92154..b84448d 100644
--- Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8.xml
+++ Linux-PAM-1.1.8/modules/pam_motd/pam_motd.8.xml
@@ -48,7 +48,20 @@
         <listitem>
           <para>
 	    The <filename>/path/filename</filename> file is displayed
-            as message of the day.
+            as message of the day. Set it to <filename>/run/motd.dynamic</filename>
+            to use the dynamic motd generated by scripts in <filename>/etc/update-motd.d</filename>
+            directory.
+          </para>
+        </listitem>
+      </varlistentry>
+      <varlistentry>
+        <term>
+          <option>noupdate</option>
+        </term>
+        <listitem>
+          <para>
+            Don't run the scripts in <filename>/etc/update-motd.d</filename>
+            to refresh the motd file.
           </para>
         </listitem>
       </varlistentry>
diff --git a/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.c b/Linux-PAM-1.1.8/modules/pam_motd/pam_motd.c
index ff9b169..17d3959 100644
--- Linux-PAM-1.1.8/modules/pam_motd/pam_motd.c
+++ Linux-PAM-1.1.8/modules/pam_motd/pam_motd.c
@@ -53,9 +53,11 @@ int pam_sm_open_session(pam_handle_t *pamh, int flags,
 			int argc, const char **argv)
 {
     int retval = PAM_IGNORE;
+    int do_update = 1;
     int fd;
     const char *motd_path = NULL;
     char *mtmp = NULL;
+    struct stat st_motd;
 
     if (flags & PAM_SILENT) {
 	return retval;
@@ -73,6 +75,9 @@ int pam_sm_open_session(pam_handle_t *pamh, int flags,
 			   "motd= specification missing argument - ignored");
 	    }
 	}
+        else if (!strcmp(*argv,"noupdate")) {
+            do_update = 0;
+        }
 	else
 	    pam_syslog(pamh, LOG_ERR, "unknown option: %s", *argv);
     }
@@ -80,6 +85,19 @@ int pam_sm_open_session(pam_handle_t *pamh, int flags,
     if (motd_path == NULL)
 	motd_path = default_motd;
 
+    /* Run the update-motd dynamic motd scripts, outputting to /run/motd.dynamic.
+       This will be displayed only when calling pam_motd with
+       motd=/run/motd.dynamic; current /etc/pam.d/login and /etc/pam.d/sshd
+       display both this file and /etc/motd. */
+    if (do_update && (stat("/etc/update-motd.d", &st_motd) == 0)
+        && S_ISDIR(st_motd.st_mode))
+    {
+       mode_t old_mask = umask(0022);
+       if (!system("/usr/bin/env -i PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin run-parts /etc/update-motd.d > /run/motd.dynamic.new"))
+           rename("/run/motd.dynamic.new", "/run/motd.dynamic");
+       umask(old_mask);
+    }
+
     while ((fd = open(motd_path, O_RDONLY, 0)) >= 0) {
 	struct stat st;
